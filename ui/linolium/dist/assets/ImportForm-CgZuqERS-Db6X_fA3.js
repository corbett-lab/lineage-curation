import{r as h,j as i}from"./index-Bwk-R6QR.js";import{o as R,m as M,u as w,a as T,bb as v,ao as $,C as A,B as k,bc as L,bd as q,G as D,aQ as W,b9 as V,ba as F,H,A as P,b8 as z,E as B}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{O as E,o as e,q as I}from"./taxonium-component.es-D8UFPkMd.js";import{a as Q}from"./getThemeProps-VQY9obTE-DyGMZP3D.js";import{W as Y,a as Z}from"./Grid-C8gEqkWK-DXtd0Rrk.js";const _=z(),J=Q("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[`maxWidth${W(String(n.maxWidth))}`],n.fixed&&o.fixed,n.disableGutters&&o.disableGutters]}}),K=t=>Z({props:t,name:"MuiContainer",defaultTheme:_}),U=(t,o)=>{const n=d=>P(o,d),{classes:c,fixed:u,disableGutters:p,maxWidth:s}=t,a={root:["root",s&&`maxWidth${W(String(s))}`,u&&"fixed",p&&"disableGutters"]};return H(a,n,c)};function X(t={}){const{createStyledComponent:o=J,useThemeProps:n=K,componentName:c="MuiContainer"}=t,u=o(({theme:s,ownerState:a})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!a.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}}}),({theme:s,ownerState:a})=>a.fixed&&Object.keys(s.breakpoints.values).reduce((d,l)=>{const m=l,r=s.breakpoints.values[m];return r!==0&&(d[s.breakpoints.up(m)]={maxWidth:`${r}${s.breakpoints.unit}`}),d},{}),({theme:s,ownerState:a})=>({...a.maxWidth==="xs"&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},...a.maxWidth&&a.maxWidth!=="xs"&&{[s.breakpoints.up(a.maxWidth)]:{maxWidth:`${s.breakpoints.values[a.maxWidth]}${s.breakpoints.unit}`}}})),p=h.forwardRef(function(s,a){const d=n(s),{className:l,component:m="div",disableGutters:r=!1,fixed:f=!1,maxWidth:g="lg",classes:x,...y}=d,b={...d,component:m,disableGutters:r,fixed:f,maxWidth:g},S=U(b,c);return i.jsx(u,{as:m,ownerState:b,className:I(S.root,l),ref:a,...y})});return E.env.NODE_ENV!=="production"&&(p.propTypes={children:e.node,classes:e.object,className:e.string,component:e.elementType,disableGutters:e.bool,fixed:e.bool,maxWidth:e.oneOfType([e.oneOf(["xs","sm","md","lg","xl",!1]),e.string]),sx:e.oneOfType([e.arrayOf(e.oneOfType([e.func,e.object,e.bool])),e.func,e.object])}),p}const G=X({createStyledComponent:D("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[`maxWidth${W(String(n.maxWidth))}`],n.fixed&&o.fixed,n.disableGutters&&o.disableGutters]}}),useThemeProps:t=>B({props:t,name:"MuiContainer"})});E.env.NODE_ENV!=="production"&&(G.propTypes={children:e.node,classes:e.object,component:e.elementType,disableGutters:e.bool,fixed:e.bool,maxWidth:e.oneOfType([e.oneOf(["xs","sm","md","lg","xl",!1]),e.string]),sx:e.oneOfType([e.arrayOf(e.oneOfType([e.func,e.object,e.bool])),e.func,e.object])});const ee=R(function({model:t,selectedAsm:o,value:n,setValue:c,setOption:u}){const p=w.getSession(t),{assemblyManager:s,textSearchManager:a}=p,{rankSearchResults:d}=t,l=t.searchScope(o),m=s.get(o);return i.jsx(V,{fetchResults:r=>F({queryString:r,assembly:m,textSearchManager:a,rankSearchResults:d,searchScope:l}),model:t,assemblyName:o,value:n,minWidth:270,onChange:r=>{c(r)},onSelect:r=>{u(r)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location"}})}),te=M()(t=>({importFormContainer:{padding:t.spacing(2)},button:{margin:t.spacing(2)},container:{padding:t.spacing(4)}})),ie=R(function({model:t}){var o;const{classes:n}=te(),c=w.getSession(t),{assemblyNames:u,assemblyManager:p}=c,{error:s}=t,[a,d]=h.useState(u[0]),[l,m]=h.useState(),r=p.get(a),f=u.length?r==null?void 0:r.error:"No configured assemblies",g=f||s,[x,y]=h.useState(""),b=r==null?void 0:r.regions,S=!!b,N=b&&((o=b[0])===null||o===void 0?void 0:o.refName)||"";return h.useEffect(()=>{y(N)},[N,a]),i.jsxs("div",{className:n.container,children:[g?i.jsx(T.ErrorMessage,{error:g}):null,i.jsx(G,{className:n.importFormContainer,children:i.jsx("form",{onSubmit:async j=>{var O;if(j.preventDefault(),t.setError(void 0),x)try{(l==null?void 0:l.getDisplayString())===x&&l.hasLocation()?await L({option:l,model:t,assemblyName:a}):!((O=l==null?void 0:l.results)===null||O===void 0)&&O.length?t.setSearchResults(l.results,l.getLabel(),a):r&&await q({input:x,assembly:r,model:t})}catch(C){console.error(C),c.notify(`${C}`,"warning")}},children:i.jsxs(Y,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[i.jsx(v,{children:i.jsx(T.AssemblySelector,{onChange:j=>{d(j)},localStorageKey:"lgv",session:c,selected:a})}),a?f?i.jsx($,{style:{color:"red"}}):S?i.jsx(v,{children:i.jsx(ee,{value:x,setValue:y,selectedAsm:a,setOption:m,model:t})}):i.jsx(A,{size:20,disableShrink:!0}):null,i.jsx(v,{children:i.jsx(k,{type:"submit",disabled:!x,className:n.button,variant:"contained",color:"primary",children:"Open"})}),i.jsx(v,{children:i.jsx(k,{disabled:!x,className:n.button,onClick:()=>{t.setError(void 0),t.showAllRegionsInAssembly(a)},variant:"contained",color:"secondary",children:"Show all regions in assembly"})})]})})})]})});export{ie as default};
