import{r as d,j as e}from"./index-Bwk-R6QR.js";import{o as m,m as g,P as b,c as p,B as h,t as f,u as c}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import"./taxonium-component.es-D8UFPkMd.js";const x=g()(i=>({paper:{margin:i.spacing(),padding:i.spacing()},submit:{marginTop:25,marginBottom:100,display:"block"}}));function w(i){return c.isElectron?{localPath:window.require("electron").webUtils.getPathForFile(i),locationType:"LocalPathLocation"}:f.storeBlobLocation({blob:i})}function y({trackName:i,val:l,model:s}){var r;const o=c.getSession(s);try{const a=[`${i.toLowerCase().replaceAll(" ","_")}-${Date.now()}`,o.adminMode?"":"-sessionTrack"].join("");let t;try{t=JSON.parse(l)}catch{t=l.split(/\n|\r\n|\r/).map(u=>u.trim()).filter(u=>!!u)}const n=typeof t[0]=="string"?{bigWigs:t}:{subadapters:t};c.isSessionWithAddTracks(o)&&(o.addTrackConf({trackId:a,type:"MultiQuantitativeTrack",name:i,assemblyNames:[s.assembly],adapter:{type:"MultiWiggleAdapter",...n}}),(r=s.view)===null||r===void 0||r.showTrack(a)),s.clearData(),c.isSessionModelWithWidgets(o)&&o.hideWidget(s)}catch(a){console.error(a),o.notifyError(`${a}`,a)}}const W=m(function({model:i}){const{classes:l}=x(),[s,r]=d.useState(""),[o,a]=d.useState(`MultiWiggle${+Date.now()}`);return e.jsxs(b,{className:l.paper,children:[e.jsxs("ul",{children:[e.jsx("li",{children:"Enter list of URLs for bigwig files in the textbox"}),e.jsx("li",{children:"Or, use the button below the text box to select files from your computer"})]}),e.jsx(p,{multiline:!0,fullWidth:!0,rows:10,value:s,placeholder:"Paste list of URLs here, or use file selector below",variant:"outlined",onChange:t=>{r(t.target.value)}}),e.jsxs(h,{variant:"outlined",component:"label",children:["Choose Files from your computer",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:({target:t})=>{r(JSON.stringify([...t.files||[]].map(n=>({type:"BigWigAdapter",bigWigLocation:w(n),source:n.name})),null,2))}})]}),e.jsx(p,{value:o,helperText:"Track name",onChange:t=>{a(t.target.value)}}),e.jsx(h,{variant:"contained",className:l.submit,onClick:()=>{y({trackName:o,val:s,model:i})},children:"Submit"}),e.jsx("p",{children:"Additional notes: "}),e.jsxs("ul",{children:[e.jsxs("li",{children:["The list of bigwig files in the text box can be a list of URLs, or a list of elements like"," ",e.jsx("code",{children:'[{"type":"BigWigAdapter","bigWigLocation":{"uri":"http://host/file.bw"}, "color":"green","source":"name for subtrack"}]'})," ","to apply e.g. the color attribute to the view"]}),e.jsx("li",{children:'Adding local files will update the textbox with JSON contents that are ready to submit with the "Submit" button'})]})]})});export{W as default};
