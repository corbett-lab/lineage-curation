import{u as f,s as r,a1 as l}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import"./index-Bwk-R6QR.js";import"./taxonium-component.es-D8UFPkMd.js";function c(n,s){if(typeof n=="object"&&n!==null)for(const e of Object.keys(n))typeof n[e]=="object"&&n[e]!==null?c(n[e],s):e==="uri"&&(n.baseUri=s.href)}function u(n,s){return new URL(n,s).href}async function d(n){var s;const e=f.getSession(n);try{const t=r.getConf(n,"configJsonLocation"),o=JSON.parse(await l.openLocation(t).readFile("utf8")),i=u(t.uri,t.baseUri);if(c(o,new URL(i)),o.assemblies)for(const a of o.assemblies)e.assemblyManager.get(a.name)||e.addSessionAssembly(a);o.tracks&&n.addTrackConfs(o.tracks),e.notify("Successfully loaded","success")}catch(t){console.error(t),e.notifyError(`${r.getConf(n,"name")}: "${t}"`,t),(s=e.breakConnection)===null||s===void 0||s.call(e,n.configuration)}}export{d as doConnect};
