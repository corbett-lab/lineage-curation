import{s as m}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{e as u}from"./index-Bp4pXTEU-Cipcrd2k.js";import{o as c}from"./rxjs-euq-mp90-DvajfGj-.js";import{m as i}from"./simpleFeature-CxppDrI6-CpRiIJat.js";import"./index-Bwk-R6QR.js";import"./taxonium-component.es-D8UFPkMd.js";function p(n){const e=new Map;for(const r of n){const t=new i(r),s=t.get("refName");let a=e.get(s);a||(a=[],e.set(s,a)),a.push(t)}for(const r of e.values())r.sort((t,s)=>t.get("start")-s.get("start"));return e}class b extends u.BaseFeatureDataAdapter{constructor(e,r,t){super(e,r,t);const s=m.readConfObject(e,"features");this.features=p(s)}async getRefNames(){return[...this.features.keys()]}async getRefNameAliases(){return[...this.features.values()].map(e=>({refName:e[0].get("refName"),aliases:e[0].get("aliases")}))}getFeatures(e){const{refName:r,start:t,end:s}=e;return c.ObservableCreate(async a=>{const f=this.features.get(r)||[];for(const o of f)o.get("end")>t&&o.get("start")<s&&a.next(o);a.complete()})}}export{b as default,p as makeFeatures};
