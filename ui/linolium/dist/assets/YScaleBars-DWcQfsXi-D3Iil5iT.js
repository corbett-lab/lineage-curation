import{j as o}from"./index-Bwk-R6QR.js";import{o as d,u as x,Y as S}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{r as F}from"./util-B0sEnOgw-Ca3d5OPC.js";const u=e=>{const{color:r="rgb(255,255,255,0.8)"}=e;return o.jsx("rect",{...e,...x.getFillProps(r)})},H=function({source:e,idx:r,rowHeight:t,labelWidth:l,model:n,exportSVG:s}){const i=Math.min(20,t),{needsCustomLegend:a,graphType:c,needsFullHeightScalebar:h,rowHeightTooSmallForScalebar:g,renderColorBoxes:m}=n,f=Math.min(t,12),V=t>11,j=m?15:0,b=l+j+5,p=(s?10:0)||(c&&!g?50:0);return o.jsxs(o.Fragment,{children:[h?null:o.jsx(u,{y:r*t+1,x:p,width:b,height:i}),e.color?o.jsx(u,{y:r*t+1,x:p,width:j,height:a?t:i,color:e.color}):null,V?o.jsx("text",{y:r*t+13,x:p+j+2,fontSize:f,children:e.name}):null]})},w=d(function({model:e,rowHeight:r,exportSVG:t}){const{graphType:l,needsFullHeightScalebar:n,rowHeightTooSmallForScalebar:s,renderColorBoxes:i,sources:a,labelWidth:c}=e,h=c+(i?15:0)+5;return a?o.jsxs(o.Fragment,{children:[n?o.jsx(u,{y:0,x:(t?10:0)||(l&&!s?50:0),width:h,height:(a.length+.25)*r}):null,a.map((g,m)=>o.jsx(H,{source:g,idx:m,model:e,rowHeight:r,exportSVG:t,labelWidth:c},`${g.name}-${m}`))]}):null}),$=d(function({model:e,orientation:r,exportSVG:t}){const{labelWidth:l}=e,{width:n}=x.getContainingView(e);return o.jsxs(o.Fragment,{children:[o.jsx("g",{transform:`translate(${t?0:F(e)},0)`,children:o.jsx(S,{model:e,orientation:r})}),o.jsx("g",{transform:`translate(${n-l-100},0)`,children:o.jsx(w,{exportSVG:t,model:e,rowHeight:12})})]})}),y=d(({model:e})=>{const{ticks:r,scaleType:t}=e,{width:l}=x.getContainingView(e),n=`[${r==null?void 0:r.values[0]}-${r==null?void 0:r.values[1]}]${t==="log"?" (log scale)":""}`,s=x.measureText(n,14),i=l-s-25;return o.jsxs(o.Fragment,{children:[o.jsx(u,{y:0,x:i,width:s+6,height:16}),o.jsx("text",{y:13,x:i,children:n})]})}),G=d(function({model:e,orientation:r,exportSVG:t}){const{sources:l,rowHeight:n,rowHeightTooSmallForScalebar:s,needsCustomLegend:i,ticks:a}=e;return l!=null&&l.length?o.jsxs(o.Fragment,{children:[o.jsx(w,{exportSVG:t,model:e,rowHeight:e.rowHeight}),s||i?o.jsx(y,{model:e}):l.map((c,h)=>o.jsx("g",{transform:`translate(0 ${n*h})`,children:o.jsx(S,{model:e,orientation:r})},`${JSON.stringify(a)}-${h}`))]}):null}),T=d(function({children:e,model:r,exportSVG:t}){const{height:l}=r;return t?e:o.jsx("svg",{style:{position:"absolute",top:0,left:0,pointerEvents:"none",height:l,width:x.getContainingView(r).width},children:e})}),B=d(function(e){const{model:r,orientation:t,exportSVG:l}=e,{showSidebar:n,stats:s,needsFullHeightScalebar:i,sources:a}=r;return s&&a?o.jsx(T,{...e,children:n?i?o.jsx($,{model:r,orientation:t,exportSVG:l}):o.jsx(G,{model:r,orientation:t,exportSVG:l}):null}):null});export{B as j};
