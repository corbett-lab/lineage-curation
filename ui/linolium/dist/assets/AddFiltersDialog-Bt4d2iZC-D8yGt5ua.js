import{r as n,j as e}from"./index-Bwk-R6QR.js";import{o as u,m as x,a as m,D as f,c as j,d as p,B as c}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{s as g}from"./jexlStrings-CDXgSi6r--_MXhKWv.js";import"./taxonium-component.es-D8UFPkMd.js";const y=x()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"},error:{color:"red",fontSize:"0.8em"}});function v(s){g.stringToJexlExpression(s)}const E=u(function({model:s,handleClose:a}){const{classes:i}=y(),{activeFilters:d}=s,[r,h]=n.useState(d.join(`
`)),[l,o]=n.useState();return n.useEffect(()=>{try{r.split(`
`).map(t=>t.trim()).filter(t=>!!t).map(t=>{v(t.trim())}),o(void 0)}catch(t){console.error(t),o(t)}},[r]),e.jsxs(m.Dialog,{maxWidth:"xl",open:!0,onClose:a,title:"Add track filters",children:[e.jsxs(f,{children:[e.jsxs("div",{children:["Add filters, in jexl format, one per line, starting with the string jexl:. Examples:"," ",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"jexl:get(feature,'name')=='BRCA1'"})," - show only feature where the name attribute is BRCA1"]}),e.jsxs("li",{children:[e.jsx("code",{children:"jexl:get(feature,'type')=='gene'"})," - show only gene type features in a GFF that has many other feature types"]}),e.jsxs("li",{children:[e.jsx("code",{children:"jexl:get(feature,'score') > 400"})," - show only features that have a score greater than 400"]}),e.jsxs("li",{children:[e.jsx("code",{children:"jexl:get(feature,'end') - get(feature,'start') < 1000000"})," ","- show only features with length less than 1Mbp"]})]})]}),l?e.jsx("p",{className:i.error,children:`${l}`}):null,e.jsx(j,{variant:"outlined",multiline:!0,minRows:5,maxRows:10,className:i.dialogContent,fullWidth:!0,value:r,onChange:t=>{h(t.target.value)},slotProps:{input:{classes:{input:i.textAreaFont}}}})]}),e.jsxs(p,{children:[e.jsx(c,{variant:"contained",color:"primary",type:"submit",autoFocus:!0,disabled:!!l,onClick:()=>{s.setJexlFilters(r.split(`
`)),a()},children:"Submit"}),e.jsx(c,{variant:"contained",color:"secondary",onClick:()=>{a()},children:"Cancel"})]})]})});export{E as default};
