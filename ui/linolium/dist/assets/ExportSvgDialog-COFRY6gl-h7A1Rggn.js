import{r as n,j as e}from"./index-Bwk-R6QR.js";import{u as g,a as v,D as w,T as y,d as L,B as p,C as O,c as E}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{J as t}from"./MenuItem-bcu4bG3--CNW0nWZm.js";import{F as N}from"./FormControlLabel-t1db3bCW-BhUWxcLA.js";import{X as R}from"./Checkbox-DRfuV2d3-Bnouab3n.js";import"./taxonium-component.es-D8UFPkMd.js";import"./dividerClasses-CVTzPOoo-DLNaoCl0.js";function F(){return e.jsxs("div",{children:[e.jsx(O,{size:20,style:{marginRight:20}}),e.jsx(y,{display:"inline",children:"Creating SVG"})]})}function i(s,a){return g.useLocalStorage(`svg-${s}`,a)}function o({children:s,...a}){return e.jsx("div",{children:e.jsx(E,{...a,children:s})})}function A({model:s,handleClose:a}){const l=g.getSession(s),c=typeof OffscreenCanvas<"u",[u,b]=n.useState(c),[C,d]=n.useState(!1),[h,m]=n.useState(),[f,S]=i("file","jbrowse.svg"),[x,k]=i("tracklabels","offset"),[j,T]=i("theme",l.themeName||"default");return e.jsxs(v.Dialog,{open:!0,onClose:a,title:"Export SVG",children:[e.jsxs(w,{children:[h?e.jsx(v.ErrorMessage,{error:h}):C?e.jsx(F,{}):null,e.jsx(o,{helperText:"filename",value:f,onChange:r=>{S(r.target.value)}}),e.jsxs(o,{select:!0,label:"Track label positioning",variant:"outlined",style:{width:150},value:x,onChange:r=>{k(r.target.value)},children:[e.jsx(t,{value:"offset",children:"Offset"}),e.jsx(t,{value:"overlay",children:"Overlay"}),e.jsx(t,{value:"left",children:"Left"}),e.jsx(t,{value:"none",children:"None"})]}),l.allThemes?e.jsx(o,{select:!0,label:"Theme",variant:"outlined",value:j,onChange:r=>{T(r.target.value)},children:Object.entries(l.allThemes()).map(([r,z])=>e.jsx(t,{value:r,children:z.name||"(Unknown name)"},r))}):null,c?e.jsx(N,{control:e.jsx(R,{checked:u,onChange:()=>{b(r=>!r)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):e.jsx(y,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),e.jsxs(L,{children:[e.jsx(p,{variant:"contained",color:"secondary",onClick:()=>{a()},children:"Cancel"}),e.jsx(p,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{d(!0),m(void 0);try{await s.exportSvg({rasterizeLayers:u,filename:f,trackLabels:x,themeName:j}),a()}catch(r){console.error(r),m(r)}finally{d(!1)}},children:"Submit"})]})]})}export{A as default};
