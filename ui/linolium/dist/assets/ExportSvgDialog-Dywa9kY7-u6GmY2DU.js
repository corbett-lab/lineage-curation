import{r as n,j as e}from"./index-Bwk-R6QR.js";import{u as p,a as h,D as T,T as g,d as k,B as x,C as z,c as w}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{J as E}from"./MenuItem-bcu4bG3--CNW0nWZm.js";import{F as R}from"./FormControlLabel-t1db3bCW-BhUWxcLA.js";import{X as F}from"./Checkbox-DRfuV2d3-Bnouab3n.js";import"./taxonium-component.es-D8UFPkMd.js";import"./dividerClasses-CVTzPOoo-DLNaoCl0.js";function G(){return e.jsxs("div",{children:[e.jsx(z,{size:20,style:{marginRight:20}}),e.jsx(g,{display:"inline",children:"Creating SVG"})]})}function f({children:a,...s}){return e.jsx("div",{children:e.jsx(w,{...s,children:a})})}function j(a,s){return p.useLocalStorage(`svg-${a}`,s)}function O({model:a,handleClose:s}){const t=p.getSession(a),i=typeof OffscreenCanvas<"u",[l,v]=n.useState(i),[y,o]=n.useState(!1),[c,m]=n.useState(),[u,b]=j("file","jbrowse.svg"),[d,C]=j("theme",t.themeName||"default");return e.jsxs(h.Dialog,{open:!0,onClose:s,title:"Export SVG",children:[e.jsxs(T,{children:[c?e.jsx(h.ErrorMessage,{error:c}):y?e.jsx(G,{}):null,e.jsx(f,{helperText:"filename",value:u,onChange:r=>{b(r.target.value)}}),t.allThemes?e.jsx(f,{select:!0,label:"Theme",value:d,onChange:r=>{C(r.target.value)},children:Object.entries(t.allThemes()).map(([r,S])=>e.jsx(E,{value:r,children:S.name||"(Unknown name)"},r))}):null,i?e.jsx(R,{control:e.jsx(F,{checked:l,onChange:()=>{v(r=>!r)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):e.jsx(g,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),e.jsxs(k,{children:[e.jsx(x,{variant:"contained",color:"secondary",onClick:()=>{s()},children:"Cancel"}),e.jsx(x,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{o(!0),m(void 0);try{await a.exportSvg({rasterizeLayers:l,filename:u,themeName:d}),s()}catch(r){console.error(r),m(r)}finally{o(!1)}},children:"Submit"})]})]})}export{O as default};
