import{M as m,N as F,u as a,O as y,t as S,j as r}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{a as h}from"./aborting-Bb5igcjT-CTmLWEJo.js";import"./index-Bwk-R6QR.js";import"./taxonium-component.es-D8UFPkMd.js";function M(e){m(e,F(async()=>{try{const o=a.getContainingView(e);if(!o.initialized||!e.statsReadyAndRegionNotTooLarge)return;const s=y.createStopToken();e.setSimplifiedFeaturesLoading(s);const{rpcManager:n}=a.getSession(e),{lengthCutoffFilter:l,sources:t,minorAlleleFrequencyFilter:c,adapterConfig:u}=e;if(t){const i=S.getRpcSessionId(e),{sampleInfo:p,hasPhased:f,features:d}=await n.call(i,"MultiVariantGetSimplifiedFeatures",{regions:o.dynamicBlocks.contentBlocks,sources:t,minorAlleleFrequencyFilter:c,lengthCutoffFilter:l,sessionId:i,adapterConfig:u,stopToken:s});r(e)&&(e.setHasPhased(f),e.setSampleInfo(p),e.setFeatures(d.map(g=>new a.SimpleFeature(g))))}}catch(o){console.error(o),!h.isAbortException(o)&&r(e)&&a.getSession(e).notifyError(`${o}`,o)}},{delay:1e3}))}export{M as getMultiVariantFeaturesAutorun};
