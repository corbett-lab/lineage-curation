import{r,j as e}from"./index-Bwk-R6QR.js";import{o as g,m as v,u as p,B as h,aW as y,c as T,a as j,aV as E}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{J as b}from"./MenuItem-bcu4bG3--CNW0nWZm.js";import{E as N,i as S,K as k,O as W}from"./Stepper-GjK3tLw3-DuPmd5oe.js";import"./taxonium-component.es-D8UFPkMd.js";import"./dividerClasses-CVTzPOoo-DLNaoCl0.js";import"./Collapse-BxSvw4ja-BFsBk1wj.js";const A=g(function({connectionType:t,model:n,session:i}){const c=t.configEditorComponent||E;return e.jsx(r.Suspense,{fallback:e.jsx(j.LoadingEllipses,{}),children:e.jsx(c,{model:{target:n},session:i})})}),B=g(function({connectionTypeChoices:t,connectionType:n,setConnectionType:i}){const c=t[0];return r.useEffect(()=>{n||i(c)},[n,c,i]),e.jsx("form",{autoComplete:"off",children:n?e.jsx(T,{value:n.name,label:"connectionType",helperText:n.description?e.jsxs(e.Fragment,{children:[n.description,n.url?e.jsx(j.ExternalLink,{href:n.url}):null]}):null,select:!0,fullWidth:!0,onChange:s=>{i(t.find(o=>o.name===s.target.value))},variant:"outlined",children:t.map(s=>e.jsx(b,{value:s.name,children:s.displayName||s.name},s.name))}):null})}),M=v()(t=>({root:{marginTop:t.spacing(1)},stepper:{backgroundColor:t.palette.background.default},button:{marginTop:t.spacing(1),marginRight:t.spacing(1)},actionsContainer:{marginBottom:t.spacing(2)}})),u=["Select a Connection Type","Configure Connection"],G=g(function({model:t}){const[n,i]=r.useState(),[c,s]=r.useState(),[o,f]=r.useState(0),{classes:l}=M(),a=p.getSession(t),{pluginManager:C}=p.getEnv(a),d=r.useMemo(()=>n==null?void 0:n.configSchema.create({connectionId:c},p.getEnv(t)),[c,n,t]);return e.jsx("div",{className:l.root,children:e.jsx(N,{className:l.stepper,activeStep:o,orientation:"vertical",children:u.map(x=>e.jsxs(S,{children:[e.jsx(k,{children:x}),e.jsxs(W,{children:[o===0?e.jsx(B,{connectionTypeChoices:C.getConnectionElements(),connectionType:n,setConnectionType:m=>{i(m),m&&s(`${m.name}-${Date.now()}`)}}):n&&d?e.jsx(A,{connectionType:n,model:d,session:a}):null,e.jsxs("div",{className:l.actionsContainer,children:[e.jsx(h,{disabled:o===0,onClick:()=>{f(o-1)},className:l.button,children:"Back"}),e.jsx(h,{disabled:!(o===0&&n||o===1&&d),variant:"contained",color:"primary",onClick:()=>{if(o===u.length-1){if(d&&y(a)){const m=a.addConnectionConf(d);a.makeConnection(m)}else a.notify("No config model to add");p.isSessionModelWithWidgets(a)&&a.hideWidget(t)}else f(o+1)},className:l.button,"data-testid":"addConnectionNext",children:o===u.length-1?"Connect":"Next"})]})]})]},x))})})});export{G as default};
