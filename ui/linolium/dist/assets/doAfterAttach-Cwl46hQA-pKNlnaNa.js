import{i as o,u as a,j as i,t as m,k as l}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import"./index-Bwk-R6QR.js";import"./taxonium-component.es-D8UFPkMd.js";function x(e){o(e,async()=>{const r=a.getContainingView(e);e.autorunReady&&e.setCurrSortBpPerPx(r.bpPerPx)},{delay:1e3}),o(e,async()=>{const{rpcManager:r}=a.getSession(e),n=a.getContainingView(e);if(!e.autorunReady)return;const{sortedBy:s,adapterConfig:p,rendererType:c,sortReady:y}=e,{bpPerPx:g}=n;if(s&&(!y||e.currSortBpPerPx===n.bpPerPx)){const{pos:t,refName:u,assemblyName:d}=s;await e.rendererType.renderInClient(r,{assemblyName:d,regions:[{start:t,end:t+1,refName:u,assemblyName:d}],adapterConfig:p,rendererType:c.name,sessionId:m.getRpcSessionId(e),layoutId:a.getContainingTrack(e).id,timeout:1e6,statusCallback:f=>{i(e)&&e.setMessage(f)},...e.renderPropsPre()})}i(e)&&(e.setCurrSortBpPerPx(g),e.setSortReady(!0))},{delay:1e3}),o(e,async()=>{if(!e.autorunReady)return;const{adapterConfig:r}=e,{staticBlocks:n}=a.getContainingView(e),s=await l({model:e,adapterConfig:r,blocks:n});i(e)&&(e.updateVisibleModifications(s),e.setModificationsReady(!0))},{delay:1e3})}export{x as doAfterAttach};
