import{r as c,j as e}from"./index-Bwk-R6QR.js";import{o as S,m as R,a as A,D as $,T as p,P as h,c as g,d as B,B as y}from"./JBrowsePanel-CjeUdi3D-Dhrr89W5.js";import{_ as P}from"./Link-D75pU1-Z-CqDhRF3I.js";import"./taxonium-component.es-D8UFPkMd.js";const Z=R()(r=>({paper:{padding:r.spacing(2),margin:r.spacing(2)},field:{margin:r.spacing(2)}})),_=["read paired","read mapped in proper pair","read unmapped","mate unmapped","read reverse strand","mate reverse strand","first in pair","second in pair","not primary alignment","read fails platform/vendor quality checks","read is PCR or optical duplicate","supplementary alignment"];function F(r){const{flag:t=0,setFlag:s}=r;return e.jsxs(e.Fragment,{children:[e.jsx(g,{type:"number",value:t,onChange:n=>{s(+n.target.value)}}),_.map((n,i)=>{const a=t&1<<i,l=`${n}_${a}`;return e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",checked:!!a,onChange:u=>{u.target.checked?s(t|1<<i):s(t&~(1<<i))}}),e.jsx("label",{htmlFor:l,children:n})]},l)})]})}const z=S(function(r){var t,s;const{model:n,handleClose:i}=r,{classes:a}=Z(),{filterBy:l}=n,[u,C]=c.useState(l.flagInclude),[m,b]=c.useState(l.flagExclude),[d,N]=c.useState(((t=l.tagFilter)===null||t===void 0?void 0:t.tag)||""),[x,E]=c.useState(((s=l.tagFilter)===null||s===void 0?void 0:s.value)||""),[v,k]=c.useState(l.readName||""),f=/^[A-Za-z][A-Za-z0-9]$/.exec(d),j="https://broadinstitute.github.io/picard/explain-flags.html";return e.jsx(A.Dialog,{open:!0,onClose:i,title:"Filter options",children:e.jsxs($,{children:[e.jsxs(p,{children:["Set filter bitmask options. Refer to ",e.jsx(P,{href:j,children:j})," ","for details"]}),e.jsx(h,{className:a.paper,variant:"outlined",children:e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{children:[e.jsx(p,{children:"Read must have ALL these flags"}),e.jsx(F,{flag:u,setFlag:C})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Read must have NONE of these flags"}),e.jsx(F,{flag:m,setFlag:b})]})]})}),e.jsxs(h,{className:a.paper,variant:"outlined",children:[e.jsx(p,{children:"Filter by tag name and value. Use * in the value field to get all reads containing any value for that tag. Example: filter tag name SA with value * to get all split/supplementary reads. Other examples include HP for haplotype, or RG for read group"}),e.jsx(g,{className:a.field,value:d,onChange:o=>{N(o.target.value)},placeholder:"Enter tag name",error:d.length===2&&!f,helperText:d.length===2&&!f?"Not a valid tag":"",slotProps:{htmlInput:{maxLength:2}}}),e.jsx(g,{className:a.field,value:x,onChange:o=>{E(o.target.value)},placeholder:"Enter tag value"})]}),e.jsxs(h,{className:a.paper,variant:"outlined",children:[e.jsx(p,{children:"Filter by read name"}),e.jsx(g,{className:a.field,value:v,onChange:o=>{k(o.target.value)},placeholder:"Enter read name"})]}),e.jsxs(B,{children:[e.jsx(y,{variant:"contained",color:"primary",autoFocus:!0,type:"submit",onClick:()=>{n.setFilterBy({flagInclude:u,flagExclude:m,readName:v,tagFilter:d!==""?{tag:d,value:x}:void 0}),i()},children:"Submit"}),e.jsx(y,{variant:"contained",color:"secondary",onClick:()=>{i()},children:"Cancel"})]})]})})});export{z as default};
